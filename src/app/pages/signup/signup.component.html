<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<div class="container">
    <div class="container__title">
        Register with <span>MarvelService</span>
    </div>

    <form 
        *ngIf="signUpForm"
        [formGroup]="signUpForm"
        class="row g-3"
        (ngSubmit)="signUp($event)"
    >
        <div class="row g-3">
            <div class="col-md-4">
                <label for="name" class="form-label">Name<span>*</span></label>
                <input class="form-control" type="text" placeholder="Name" formControlName="name" id="name">
                <div class="error"
                    *ngIf="!signUpForm.get('name')?.valid
                    && signUpForm.get('name')?.dirty && signUpForm.get('name')?.errors?.['required']"
                >
                    Required field
                </div>
            </div>
            <div class="col-md-4">
                <label for="lastname" class="form-label">Lastname<span>*</span></label>
                <input class="form-control" type="text" placeholder="Lastname" formControlName="lastname" id="lastname">
                <div class="error"
                    *ngIf="!signUpForm.get('lastname')?.valid
                    && signUpForm.get('lastname')?.dirty && signUpForm.get('lastname')?.errors?.['required']"
                >
                    Required field
                </div>
            </div>
        </div>
        <div class="row g-3">
            <div class="col-md-4">
                <label for="email" class="form-label">Email<span>*</span></label>
                <input class="form-control" type="email" placeholder="Email" formControlName="email" id="email">
                <div class="error"
                    *ngIf="!signUpForm.get('email')?.valid
                    && signUpForm.get('email')?.dirty && signUpForm.get('email')?.errors?.['required']"
                >
                    Required field
                </div>
                <div class="error"
                    *ngIf="!signUpForm.get('email')?.valid
                    && signUpForm.get('email')?.dirty && signUpForm.get('email')?.errors?.['pattern']"
                >
                    Wrong email format
                </div>
            </div>
            <div class="col-md-4">
                <label for="password" class="form-label">Password<span>*</span></label>
                <input class="form-control" type="password" placeholder="password" formControlName="password" id="password">
                <div class="error"
                    *ngIf="!signUpForm.get('password')?.valid
                    && signUpForm.get('password')?.dirty && signUpForm.get('password')?.errors?.['pattern']"
                >
                Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters
                </div>
                
            </div>
        </div>
        <div class="row g-3">
            <div class="col-md-4">
                <label for="phone" class="form-label">Phone number</label>
                <input class="form-control" type="number" placeholder="Phone number" formControlName="phone" id="phone" maxlength="9">
                <div class="error"
                    *ngIf="!signUpForm.get('phone')?.valid
                    && signUpForm.get('phone')?.dirty && signUpForm.get('phone')?.errors?.['pattern']"
                >
                Phone number must be 9-digit long
                </div>
            </div>
            <div class="col-md-4">
                <label for="birthdate" class="form-label">Date of birth</label>
                <input type="date" class="form-control" formControlName="birthdate" id="birthdate">
                <div class="error"
                    *ngIf="!signUpForm.get('birthdate')?.valid
                    && signUpForm.get('birthdate')?.dirty && signUpForm.get('birthdate')?.errors?.['dateCheck']"
                >
                Date of birth cannot be after current date
                </div>
            </div>
        </div>
        <div class="row g-3">
            <div class="col-md-4">
                <label for="address" class="form-label">Address</label>
                <input class="form-control" type="text" placeholder="Enter address" formControlName="address" id="address">
            </div>
            <div class="col-md-4">
                <label for="city" class="form-label">City</label>
                <input type="text" class="form-control" formControlName="city" id="city">
            </div>
            
        </div>
        <div class="row g-3">
            <div class="col-md-4">
                <label for="postal_code" class="form-label">Postal Code</label>
                <input type="number" class="form-control" formControlName="postal_code" id="postal_code">
            </div>
            <div class="col-md-4">
                <label for="province" class="form-label">Province</label>
                <select class="form-select" formControlName="province" id="provinc">
                    <option *ngFor="let province of provinces" [value]="province">{{province}}</option>
                </select>
            </div>
        </div>
        <div class="row g-3">
            <div class="col-4">
                <button type="submit" class="btn btn-danger btn-lg" [disabled]="!signUpForm.valid">Register</button>
            </div>
        </div>
    </form>

</div>